let acessarNome = valor_cookie('nome')
let nome = acessarNome
console.log(acessarNome)
console.log(nome)

if (acessarNome === null || acessarNome === false) {
    nome = window.prompt("Digite seu nome:")
}

function cria_cookie(nome, valor) {
    var data = new Date(2023, 0, 01)
    data = data.toGMTString()
    valor = encodeURI(valor)
    document.cookie = nome + '=' + valor + '; expires=' + data + '; path=/';
}

function apaga_cookie(nome) {
    var data = new Date(2010, 0, 01)
    data = data.toGMTString()
    document.cookie = nome + '=; expires=' + data + '; path=/'
}

function valor_cookie(nome_cookie) {
    var cname = ' ' + nome_cookie + '='
    var cookies = document.cookie

    if (cookies.indexOf(cname) == -1) return false
    cookies = cookies.substr(cookies.indexOf(cname), cookies.length)

    if (cookies.indexOf(';') != -1) cookies = cookies.substr(0, cookies.indexOf(';'))
    cookies = cookies.split('=')[1]

    return decodeURI(cookies)
}

cria_cookie('nome', nome)

const menuTop = document.querySelector('[menu-top]')
$('.links-rapidos').css({ 'background-color': '#00000000', 'padding': '2px 10px', 'margin-top': '0px', 'width': '70px' })
menuTop.onclick = () => {
    if ($(menuTop).hasClass('abrir')) {
        $('.links-rapidos').css({ 'background-color': '#232427', 'padding': '10px 10px 5px 10px', 'margin-top': '-2px', 'width': '200px' })
        $(menuTop).removeClass('abrir'); $(menuTop).addClass('fechar')
        $('.links-rapidos').addClass('col-4'); $('.links-rapidos').removeClass('col-2')
        $(menuTop).addClass('py-1'); $(menuTop).removeClass('py-0')
        menuTop.innerHTML = '<svg class="mt-1" viewBox="0 0 172 172" width="18px" height="18px"><g fill="#ffffff"><path d="M107.33488,86l46.8872,-70.3308c0.70176,-1.05608 0.77056,-2.41144 0.172,-3.52944c-0.59856,-1.118 -1.76472,-1.81976 -3.03408,-1.81976h-25.2496c-1.12488,0 -2.18096,0.5504 -2.82424,1.47576l-37.28616,53.56424l-37.2896,-53.56424c-0.64328,-0.92536 -1.69592,-1.47576 -2.8208,-1.47576h-25.2496c-1.26936,0 -2.43552,0.69832 -3.03408,1.81632c-0.59856,1.118 -0.52976,2.4768 0.172,3.52944l46.8872,70.33424l-46.8872,70.3308c-0.70176,1.05608 -0.77056,2.41144 -0.172,3.52944c0.59856,1.118 1.76472,1.81976 3.03408,1.81976h25.2496c1.12488,0 2.18096,-0.5504 2.82424,-1.47576l37.28616,-53.56424l37.2896,53.56424c0.64328,0.92536 1.69592,1.47576 2.8208,1.47576h25.2496c1.26936,0 2.43552,-0.69832 3.03408,-1.81632c0.59856,-1.118 0.52976,-2.4768 -0.172,-3.52944z"></path></g></svg>'
    } else {
        $('.links-rapidos').addClass('col-2'); $('.links-rapidos').removeClass('col-4')
        $('.links-rapidos').css({ 'background-color': '#00000000', 'padding': '2px 10x', 'margin-top': '0px', 'width': '70px' })
        $(menuTop).removeClass('fechar'); $(menuTop).addClass('abrir')
        $(menuTop).addClass('py-0'); $(menuTop).removeClass('py-1')
        menuTop.innerHTML = '<svg class="mt-1" viewBox="0 0 172 172" width="22px" height="24px"><g fill="#ffffff"><path d="M14.33333,35.83333v14.33333h143.33333v-14.33333zM14.33333,78.83333v14.33333h143.33333v-14.33333zM14.33333,121.83333v14.33333h143.33333v-14.33333z"></path></g></svg>'
    }
}

function getUserPosition() {
    let url
    navigator.geolocation.getCurrentPosition((pos) => {
        let lat = pos.coords.latitude
        let long = pos.coords.longitude
        url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${long}&units=imperial&APPID=95b11822eb429c84c1143a19251b1881`
        fetchApi(url)
    })
}

function fetchApi(url) {
    let city = document.querySelector('.cidade')
    let temp = document.querySelector('span.temperatura')
    fetch(url)
        .then((data) => {
            return data.json()
        })
        .then((data) => {
            let tempInCelsius = ((5 / 9) * (data.main.temp - 32)).toFixed(1)
            city.innerText = data.name
            temp.innerText = tempInCelsius
        })
        .catch((err) => {
            city.innerText = `Não foi possível acessar os dados, verifique sua conexão.`
            temp.innerText = `-`
        })
}

getUserPosition()

function momentoDoDia(hora) {
    if (hora > 06 && hora < 12) {
        return 'Bom dia'
    } else if (hora > 12 && hora < 18) {
        return 'Boa tarde'
    } else if (hora > 18 || (hora >= 0 && hora < 5)) {
        return 'Boa noite'
    } else { return 'Oi' }
}

function cumprimentar() {
    const momentoDia = momentoDoDia(new Date().getHours())
    const cumprimentacao = `${momentoDia}, ${acessarNome}.`
    const paragrafo = document.querySelector('p.cumprimentacao')
    const divSvgMomento = document.querySelector('div.svgMomento')
    paragrafo.innerHTML = cumprimentacao
    if (momentoDia === 'Bom dia') {
        divSvgMomento.innerHTML = '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 171 171" width="48px"><g fill="none" fill-rule="none" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,171.98438v-171.98437h171.98438v171.98438z" fill="none" fill-rule="nonzero"></path><g fill="#f1c40f"><path d="M138.81638,58.368c-8.10825,-21.59588 -28.88475,-36.993 -53.31637,-36.993c-14.706,0 -28.0725,5.62163 -38.18288,14.763c-1.47487,-0.32062 -2.9925,-0.513 -4.56712,-0.513c-11.80613,0 -21.375,9.56887 -21.375,21.375c0,5.94938 2.43675,11.32162 6.3555,15.19762c-15.86025,3.59813 -27.7305,17.727 -27.7305,34.67738c0,19.67212 15.95287,35.625 35.625,35.625h92.625c23.61225,0 42.75,-19.13775 42.75,-42.75c0,-19.95713 -13.69425,-36.66525 -32.18363,-41.382z" fill-rule="nonzero" opacity="0.35"></path><path d="M82.92788,53.01l-9.58313,-4.33913c-1.35375,-0.61988 -2.42963,-1.72425 -2.99962,-3.09937c-0.57,-1.37512 -0.59137,-2.91412 -0.07125,-4.31063l3.705,-9.84675c0.60563,-1.61025 0.21375,-3.42712 -1.00462,-4.6455c-1.21837,-1.21837 -3.03525,-1.61025 -4.6455,-1.00463l-9.84675,3.705c-1.3965,0.52725 -2.9355,0.49875 -4.31063,-0.07125c-1.37512,-0.57 -2.48663,-1.63875 -3.09937,-2.99962l-4.32488,-9.56888c-0.7125,-1.57463 -2.27287,-2.57925 -3.99712,-2.57925c-1.72425,0 -3.28463,1.00463 -3.99712,2.57925l-4.33913,9.58312c-0.61988,1.35375 -1.72425,2.42963 -3.09937,2.99963c-1.37512,0.57 -2.91412,0.59138 -4.31062,0.06413l-9.84675,-3.705c-1.61025,-0.60562 -3.42712,-0.21375 -4.6455,1.00463c-1.21125,1.21125 -1.60313,3.02812 -0.9975,4.63837l3.71212,9.84675c0.52725,1.3965 0.49875,2.9355 -0.07125,4.31062c-0.57,1.37512 -1.63875,2.48663 -2.99963,3.09937l-9.576,4.332c-1.57463,0.7125 -2.57925,2.27287 -2.57925,3.99712c0,1.72425 1.00462,3.28463 2.57212,3.99l9.58313,4.33913c1.35375,0.61987 2.42962,1.72425 2.99962,3.09938c0.57,1.37512 0.59138,2.91412 0.07125,4.31063l-3.705,9.84675c-0.60562,1.61025 -0.21375,3.42713 1.00463,4.6455c1.21838,1.21837 3.03525,1.61025 4.6455,1.00463l9.84675,-3.705c1.3965,-0.52725 2.9355,-0.49875 4.31063,0.07125c1.37512,0.57 2.48663,1.63875 3.09937,2.99962l4.33913,9.58313c0.69825,1.56037 2.25863,2.565 3.98288,2.565c1.72425,0 3.28463,-1.00463 3.99,-2.57212l4.33913,-9.58313c0.61987,-1.35375 1.72425,-2.42963 3.09937,-2.99962c1.37512,-0.57 2.91412,-0.59137 4.31062,-0.07125l9.84675,3.705c1.61025,0.60563 3.42712,0.21375 4.6455,-1.00462c1.21837,-1.21837 1.61025,-3.03525 1.00463,-4.6455l-3.705,-9.84675c-0.52725,-1.3965 -0.49875,-2.9355 0.07125,-4.31063c0.57,-1.37512 1.63875,-2.48663 2.99962,-3.09938l9.58312,-4.33912c1.56038,-0.69825 2.565,-2.25862 2.565,-3.98287c0,-1.72425 -1.00463,-3.28463 -2.57212,-3.99zM42.77138,75.61763c-10.26712,0 -18.58912,-8.322 -18.58912,-18.58913c0,-10.26712 8.322,-18.58912 18.58913,-18.58912c10.26713,0 18.58913,8.32913 18.58913,18.58912c0,10.26713 -8.322,18.58913 -18.58913,18.58913z" fill-rule="evenodd"></path></g></g></svg>'
    } else if (momentoDia === 'Boa tarde') {
        divSvgMomento.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width = "48" height = "48" viewBox = "0 0 171 171" style = " fill:#000000;" > <g fill="none" fill-rule="none" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,171.98438v-171.98437h171.98438v171.98438z" fill="none" fill-rule="nonzero"></path><g fill="#f1c40f"><path d="M77.84063,8.50013c1.36087,-3.00675 4.3605,-4.93763 7.65937,-4.93763c3.29887,0 6.2985,1.93088 7.65937,4.93763l8.31488,18.36825c1.17562,2.60063 3.29887,4.65262 5.93512,5.74275c2.63625,1.09012 5.586,1.14 8.25787,0.13537l18.867,-7.10362c3.09225,-1.16137 6.57638,-0.41325 8.90625,1.92375c2.337,2.337 3.08513,5.82112 1.92375,8.90625l-7.10362,18.867c-1.00462,2.67188 -0.95475,5.62162 0.13537,8.25787c1.09013,2.63625 3.14212,4.75238 5.74275,5.93513l18.36825,8.31488c2.99963,1.35375 4.9305,4.35338 4.9305,7.65225c0,3.29887 -1.93088,6.2985 -4.93762,7.65937l-18.36825,8.31488c-2.60062,1.17562 -4.65262,3.29887 -5.74275,5.93512c-1.09013,2.63625 -1.14,5.586 -0.13537,8.25787l7.10362,18.867c1.16137,3.09225 0.41325,6.57638 -1.92375,8.90625c-2.337,2.337 -5.82113,3.08513 -8.90625,1.92375l-18.867,-7.10362c-2.67187,-1.00462 -5.62163,-0.95475 -8.25788,0.13537c-2.63625,1.09013 -4.75238,3.14212 -5.93512,5.74275l-8.31488,18.36825c-1.35375,2.99963 -4.35337,4.9305 -7.65225,4.9305c-3.29887,0 -6.2985,-1.93088 -7.65937,-4.93762l-8.31488,-18.36825c-1.17562,-2.60062 -3.29887,-4.65262 -5.93512,-5.74275c-2.63625,-1.09013 -5.586,-1.14 -8.25787,-0.13537l-18.867,7.10362c-3.09225,1.16137 -6.57637,0.41325 -8.90625,-1.92375c-2.32988,-2.337 -3.08513,-5.82113 -1.92375,-8.90625l7.10363,-18.867c1.00463,-2.67187 0.95475,-5.62163 -0.13537,-8.25788c-1.09013,-2.63625 -3.14212,-4.75238 -5.74275,-5.93512l-18.36825,-8.31488c-2.99963,-1.35375 -4.9305,-4.35337 -4.9305,-7.65225c0,-3.29887 1.93088,-6.2985 4.93763,-7.65937l18.36825,-8.31488c2.60063,-1.17562 4.65262,-3.29887 5.74275,-5.93512c1.09012,-2.63625 1.14,-5.586 0.13537,-8.25787l-7.11075,-18.867c-1.16137,-3.09225 -0.41325,-6.57637 1.92375,-8.90625c2.337,-2.337 5.82112,-3.08513 8.90625,-1.92375l18.867,7.10363c2.67188,1.01175 5.62163,0.96187 8.25788,-0.12825c2.63625,-1.09012 4.75238,-3.14212 5.93512,-5.74275z" fill-rule="evenodd" opacity="0.35"></path><path d="M121.16775,85.557c0,19.67212 -15.95288,35.625 -35.625,35.625c-19.67212,0 -35.625,-15.95288 -35.625,-35.625c0,-19.67212 15.95288,-35.625 35.625,-35.625c19.67212,0 35.625,15.96 35.625,35.625" fill-rule="nonzero"></path></g></g></svg > '
    } else if (momentoDia === 'Boa noite') {
        divSvgMomento.innerHTML = '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 171 171" width="48px"><g fill="none" fill-rule="none" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,171.98438v-171.98437h171.98438v171.98438z" fill="none" fill-rule="nonzero"></path><g fill="#002296"><path d="M115.61738,105.62813c-25.12987,-4.94475 -45.30075,-25.11562 -50.2455,-50.2455c-1.54613,-7.83037 -1.60313,-15.43987 -0.456,-22.63612c1.21125,-7.5525 -6.6975,-13.4805 -13.4235,-9.82537c-25.45763,13.84388 -41.53875,42.73575 -36.23063,74.76263c4.88063,29.4405 28.614,53.17388 58.04737,58.0545c32.02688,5.30813 60.92587,-10.773 74.76975,-36.23775c3.65512,-6.726 -2.26575,-14.62763 -9.82538,-13.4235c-7.19625,1.15425 -14.80575,1.09725 -22.63613,-0.44887z" fill-rule="nonzero" opacity="0.50"></path><path d="M100.22738,11.47838c0.84788,-1.88812 2.72175,-3.09937 4.788,-3.09937c2.06625,0 3.94013,1.21125 4.788,3.09938l3.94012,8.79938c0.07125,0.16388 0.17813,0.3135 0.30638,0.44175c0.12825,0.12825 0.27788,0.228 0.44175,0.30637l8.79937,3.94013c1.88813,0.84788 3.09937,2.72175 3.09937,4.788c0,2.06625 -1.21125,3.94012 -3.09937,4.788l-8.79937,3.94012c-0.16387,0.07125 -0.3135,0.17813 -0.44175,0.30638c-0.12825,0.12825 -0.228,0.27788 -0.30638,0.44175l-3.94725,8.79937c-0.84788,1.88813 -2.72175,3.09938 -4.788,3.09938c-2.06625,0 -3.94013,-1.21125 -4.788,-3.09938l-3.94013,-8.79937c-0.07125,-0.16387 -0.17812,-0.3135 -0.30637,-0.44175c-0.12825,-0.12825 -0.27787,-0.228 -0.44175,-0.30638l-8.79937,-3.94012c-1.88813,-0.84788 -3.09937,-2.72175 -3.09937,-4.788c0,-2.06625 1.21125,-3.94012 3.09937,-4.788l8.79937,-3.94012c0.16388,-0.07125 0.3135,-0.17813 0.44175,-0.30638c0.12825,-0.12825 0.228,-0.27788 0.30637,-0.44175z" fill-rule="evenodd"></path><path d="M132.183,59.06625c0.56288,-1.254 1.81688,-2.06625 3.192,-2.06625c1.37512,0 2.62912,0.81225 3.192,2.06625l2.62912,5.871c0.04988,0.10688 0.114,0.20663 0.1995,0.29212c0.0855,0.0855 0.18525,0.15675 0.29212,0.1995l5.871,2.62912c1.254,0.56288 2.06625,1.81688 2.06625,3.192c0,1.37512 -0.81225,2.62913 -2.06625,3.192l-5.871,2.62912c-0.10688,0.04988 -0.20663,0.114 -0.29212,0.1995c-0.0855,0.0855 -0.15675,0.18525 -0.1995,0.29212l-2.62912,5.871c-0.56288,1.254 -1.81688,2.06625 -3.192,2.06625c-1.37512,0 -2.62912,-0.81225 -3.192,-2.06625l-2.62912,-5.871c-0.04988,-0.10688 -0.114,-0.20663 -0.1995,-0.29212c-0.0855,-0.0855 -0.18525,-0.15675 -0.29212,-0.1995l-5.871,-2.62912c-1.254,-0.56288 -2.06625,-1.81688 -2.06625,-3.192c0,-1.37512 0.81225,-2.62913 2.06625,-3.192l5.871,-2.62912c0.10688,-0.04988 0.20663,-0.114 0.29212,-0.1995c0.0855,-0.0855 0.15675,-0.18525 0.1995,-0.29212z" fill-rule="evenodd"></path></g></g></svg>'
    }
}

cumprimentar()
